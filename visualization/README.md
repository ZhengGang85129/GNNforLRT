# Visualization Details


This folder provides tools for visualizing dataset distributions and model performance at different stages of the pipeline.

## Usage
### Stage-wise performance

Visualize efficiency and purity for each training stage:

```bash
python3 ./stage_performance.py ./XXX.yaml  # ./XXX.yaml refer to the yaml file generated during training procedure, which contains the efficiency and purity for each stage.
```
* XXX.yaml: YAML file generated during training, containing recorded efficiency and purity metrics for each stage.
### Performance (AUC/Edge score distribution)

Visualize model evaluation metrics such as AUC and edge score distribution:
```bash
python3 ./plt_performance.py GNN_output/XXXX # GNN_output/XXXX refer to the torch file generated by GNN stage.
```
* GNN_output/XXXX: Torch file generated during the GNN stage containing model outputs.

### Efficiency & Purity 

```bash
python3 ./tracks/model_evaluation.py --config tracks/track_reco_config/XXX.yaml --output YYY --mode [extract:evaluate] --lepton [prompt:displaced] --fname ZZZ 
```
Explanation for each argument:
- —config: Path to the configuration file specifying the source objects (particles, hits, edges) and their relationships.(Template available in tracks/track_reco_config/Template.yaml)`
- —output(-d): Output folder for saving the extracted metrics (default: metrics/final). (Usually, you don't need to manually set this.)
- —mode(-m):
  *  `extract`: Extract information from generated, reconstructed, and matched particles.
  *  `evaluate`: Generate evaluation plots based on the extracted data.
- —fname: Specify a filename for both extraction and evaluation outputs. (Make sure the same name is used for both steps.)


### Raw Hit Distribution
Visualize the spatial distribution of raw detector hits:
```bash
python3 tracks/check_rawhits.py tracks/track_reco_config/XXX.yaml GNN_output/YYYY
```
* XXX.yaml: Configuration file describing the dataset layout.
* YYYY: Model output file to be analyzed.
YYYY: Model output file to be analyzed.
